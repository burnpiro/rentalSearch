(function () {
    angular.module('rental-services', [])

        .service('LinkService', [function(){
            //node size counted from research
            var self = this;
            var properNodeSize = 6;
            var categorySpliter = 'CatId=', locationSpliter = 'Location=';

            var sdata="\0030\003Polska\003202\0031\0030\004\0030-0\003Dolnośląskie\0033200007\0031\0031\0040-0\0030-0_0\003Wszystkie Dolnośląskie\0033200007\0031\0030\0040-0\0030-0_1\003Bardo\0033200595\0031\0031\0040-0\0030-0_2\003Bielawa\0033200085\0031\0031\0040-0\0030-0_3\003 Bierutów\0033200435\0031\0031\0040-0\0030-0_4\003Bogatynia\0033200086\0031\0031\0040-0\0030-0_5\003 Boguszów-Gorce\0033200437\0031\0031\0040-0\0030-0_6\003Bolesławiec\0033200087\0031\0031\0040-0\0030-0_7\003 Bolków\0033200436\0031\0031\0040-0\0030-0_8\003 Brzeg Dolny\0033200438\0031\0031\0040-0\0030-0_9\003 Bystrzyca Kłodzka\0033200439\0031\0031\0040-0\0030-0_10\003 Chocianów\0033200440\0031\0031\0040-0\0030-0_11\003 Chojnów\0033200441\0031\0031\0040-0\0030-0_12\003Długołęka\0033200609\0031\0031\0040-0\0030-0_13\003Duszniki Zdrój\0033200594\0031\0031\0040-0\0030-0_14\003Dzierżoniów\0033200088\0031\0031\0040-0\0030-0_15\003Głogów\0033200089\0031\0031\0040-0\0030-0_16\003Góra\0033200090\0031\0031\0040-0\0030-0_17\003 Gryfów Śląski\0033200442\0031\0031\0040-0\0030-0_18\003Jawor\0033200091\0031\0031\0040-0\0030-0_19\003 Jelcz-Laskowice\0033200443\0031\0031\0040-0\0030-0_20\003Jelenia Góra\0033200092\0031\0031\0040-0\0030-0_21\003Kamienna Góra\0033200093\0031\0031\0040-0\0030-0_22\003Karpacz\0033200094\0031\0031\0040-0\0030-0_23\003Kłodzko\0033200095\0031\0031\0040-0\0030-0_24\003 Kowary\0033200444\0031\0031\0040-0\0030-0_25\003 Kudowa-Zdrój\0033200445\0031\0031\0040-0\0030-0_26\003Legnica\0033200096\0031\0031\0040-0\0030-0_27\003Lubań\0033200097\0031\0031\0040-0\0030-0_28\003Lubomierz\0033200597\0031\0031\0040-0\0030-0_29\003Lubin\0033200098\0031\0031\0040-0\0030-0_30\003Lwówek Śląski\0033200099\0031\0031\0040-0\0030-0_31\003Międzylesie\0033200599\0031\0031\0040-0\0030-0_32\003Milicz\0033200100\0031\0031\0040-0\0030-0_33\003Nowa Ruda\0033200101\0031\0031\0040-0\0030-0_34\003 Oborniki Śląskie\0033200446\0031\0031\0040-0\0030-0_35\003Oława\0033200102\0031\0031\0040-0\0030-0_36\003Oleśnica\0033200103\0031\0031\0040-0\0030-0_37\003Piechowice\0033200434\0031\0031\0040-0\0030-0_38\003 Pieszyce\0033200447\0031\0031\0040-0\0030-0_39\003 Piława Górna\0033200448\0031\0031\0040-0\0030-0_40\003Polanica-Zdrój\0033200104\0031\0031\0040-0\0030-0_41\003Polkowice\0033200105\0031\0031\0040-0\0030-0_42\003 Strzegom\0033200449\0031\0031\0040-0\0030-0_43\003Strzelin\0033200107\0031\0031\0040-0\0030-0_44\003 Syców\0033200450\0031\0031\0040-0\0030-0_45\003Marciszów\0033200598\0031\0031\0040-0\0030-0_46\003Sobótka\0033200600\0031\0031\0040-0\0030-0_47\003Środa Śląska\0033200108\0031\0031\0040-0\0030-0_48\003Szklarska Poręba\0033200106\0031\0031\0040-0\0030-0_49\003Świdnica\0033200109\0031\0031\0040-0\0030-0_50\003Świebodzice\0033200110\0031\0031\0040-0\0030-0_51\003Szczawno-Zdrój\0033200601\0031\0031\0040-0\0030-0_52\003Trzebnica\0033200111\0031\0031\0040-0\0030-0_53\003Wałbrzych\0033200112\0031\0031\0040-0\0030-0_54\003Wołów\0033200113\0031\0031\0040-0\0030-0_55\003Wrocław\0033200114\0031\0031\0040-0\0030-0_56\003Ząbkowice Śląskie\0033200115\0031\0031\0040-0\0030-0_57\003Zgorzelec\0033200116\0031\0031\0040-0\0030-0_58\003 Ziębice\0033200451\0031\0031\0040-0\0030-0_59\003Złotoryja\0033200117\0031\0031\0040-0\0030-0_60\003 Żarów\0033200452\0031\0031\0040-0\0030-0_61\003 Żmigród\0033200453\0031\0031\004\0030-1\003Kujawsko - pomorskie\0033200075\0031\0031\0040-1\0030-1_0\003Wszystkie Kujawsko - pomorskie\0033200075\0031\0030\0040-1\0030-1_1\003Aleksandrów Kujawski\0033200118\0031\0031\0040-1\0030-1_2\003 Barcin\0033200454\0031\0031\0040-1\0030-1_3\003Brodnica\0033200119\0031\0031\0040-1\0030-1_4\003Bydgoszcz\0033200120\0031\0031\0040-1\0030-1_5\003Chełmno\0033200121\0031\0031\0040-1\0030-1_6\003 Chełmża\0033200455\0031\0031\0040-1\0030-1_7\003 Ciechocinek\0033200456\0031\0031\0040-1\0030-1_8\003 Gniewkowo\0033200457\0031\0031\0040-1\0030-1_9\003Golub-Dobrzyń\0033200122\0031\0031\0040-1\0030-1_10\003Grudziądz\0033200123\0031\0031\0040-1\0030-1_11\003Inowrocław\0033200124\0031\0031\0040-1\0030-1_12\003 Janikowo\0033200458\0031\0031\0040-1\0030-1_13\003 Koronowo\0033200459\0031\0031\0040-1\0030-1_14\003 Kruszwica\0033200460\0031\0031\0040-1\0030-1_15\003Lipno\0033200125\0031\0031\0040-1\0030-1_16\003Mogilno\0033200126\0031\0031\0040-1\0030-1_17\003Nakło nad Notecią\0033200127\0031\0031\0040-1\0030-1_18\003Radziejów\0033200128\0031\0031\0040-1\0030-1_19\003Rypin\0033200129\0031\0031\0040-1\0030-1_20\003Sępólno Krajeńskie\0033200130\0031\0031\0040-1\0030-1_21\003 Solec Kujawski\0033200461\0031\0031\0040-1\0030-1_22\003 Strzelno\0033200462\0031\0031\0040-1\0030-1_23\003Świecie\0033200131\0031\0031\0040-1\0030-1_24\003 Szubin\0033200463\0031\0031\0040-1\0030-1_25\003Toruń\0033200132\0031\0031\0040-1\0030-1_26\003Tuchola\0033200133\0031\0031\0040-1\0030-1_27\003Wąbrzeźno\0033200134\0031\0031\0040-1\0030-1_28\003 Więcbork\0033200464\0031\0031\0040-1\0030-1_29\003Włocławek\0033200135\0031\0031\0040-1\0030-1_30\003Żnin\0033200136\0031\0031\004\0030-2\003Lubelskie\0033200076\0031\0031\0040-2\0030-2_0\003Wszystkie Lubelskie\0033200076\0031\0030\0040-2\0030-2_1\003Bełżyce\0033200465\0031\0031\0040-2\0030-2_2\003Biała Podlaska\0033200137\0031\0031\0040-2\0030-2_3\003Biłgoraj\0033200138\0031\0031\0040-2\0030-2_4\003Chełm\0033200139\0031\0031\0040-2\0030-2_5\003Dęblin\0033200466\0031\0031\0040-2\0030-2_6\003Hrubieszów\0033200140\0031\0031\0040-2\0030-2_7\003Janów Lubelski\0033200141\0031\0031\0040-2\0030-2_8\003Krasnystaw\0033200142\0031\0031\0040-2\0030-2_9\003Kraśnik\0033200143\0031\0031\0040-2\0030-2_10\003Lubartów\0033200144\0031\0031\0040-2\0030-2_11\003Lublin\0033200145\0031\0031\0040-2\0030-2_12\003Łęczna\0033200146\0031\0031\0040-2\0030-2_13\003Łuków\0033200147\0031\0031\0040-2\0030-2_14\003Międzyrzec Podlaski\0033200467\0031\0031\0040-2\0030-2_15\003Opole Lubelskie\0033200148\0031\0031\0040-2\0030-2_16\003Parczew\0033200149\0031\0031\0040-2\0030-2_17\003Poniatowa\0033200468\0031\0031\0040-2\0030-2_18\003Puławy\0033200150\0031\0031\0040-2\0030-2_19\003Radzyń Podlaski\0033200151\0031\0031\0040-2\0030-2_20\003Ryki\0033200152\0031\0031\0040-2\0030-2_21\003Świdnik\0033200153\0031\0031\0040-2\0030-2_22\003Terespol\0033200469\0031\0031\0040-2\0030-2_23\003Tomaszów Lubelski\0033200154\0031\0031\0040-2\0030-2_24\003Włodawa\0033200155\0031\0031\0040-2\0030-2_25\003Zamość\0033200156\0031\0031\004\0030-3\003Lubuskie\0033200077\0031\0031\0040-3\0030-3_0\003Wszystkie Lubuskie\0033200077\0031\0030\0040-3\0030-3_1\003Drezdenko\0033200158\0031\0031\0040-3\0030-3_2\003Gorzów Wielkopolski\0033200157\0031\0031\0040-3\0030-3_3\003Gubin\0033200159\0031\0031\0040-3\0030-3_4\003 Kostrzyn nad Odrą\0033200470\0031\0031\0040-3\0030-3_5\003 Kożuchów\0033200471\0031\0031\0040-3\0030-3_6\003Krosno Odrzańskie\0033200160\0031\0031\0040-3\0030-3_7\003Lubsko\0033200161\0031\0031\0040-3\0030-3_8\003Międzyrzecz\0033200162\0031\0031\0040-3\0030-3_9\003Nowa Sól\0033200163\0031\0031\0040-3\0030-3_10\003 Rzepin\0033200472\0031\0031\0040-3\0030-3_11\003sulechów\0033200166\0031\0031\0040-3\0030-3_12\003Słubice\0033200164\0031\0031\0040-3\0030-3_13\003Strzelce Krajeńskie\0033200165\0031\0031\0040-3\0030-3_14\003 Skwierzyna\0033200473\0031\0031\0040-3\0030-3_15\003Sulęcin\0033200167\0031\0031\0040-3\0030-3_16\003Szprotawa\0033200168\0031\0031\0040-3\0030-3_17\003Świebodzin\0033200169\0031\0031\0040-3\0030-3_18\003 Witnica\0033200474\0031\0031\0040-3\0030-3_19\003Wschowa\0033200170\0031\0031\0040-3\0030-3_20\003Zielona Góra\0033200171\0031\0031\0040-3\0030-3_21\003Żagań\0033200172\0031\0031\0040-3\0030-3_22\003Żary\0033200173\0031\0031\004\0030-4\003Łódzkie\0033200004\0031\0031\0040-4\0030-4_0\003Wszystkie Łódzkie\0033200004\0031\0030\0040-4\0030-4_1\003Aleksandrów Łódzki\0033200174\0031\0031\0040-4\0030-4_2\003Andrespol\0033200588\0031\0031\0040-4\0030-4_3\003Bełchatów\0033200175\0031\0031\0040-4\0030-4_4\003Brzeziny\0033200176\0031\0031\0040-4\0030-4_5\003Głowno\0033200177\0031\0031\0040-4\0030-4_6\003 Koluszki\0033200475\0031\0031\0040-4\0030-4_7\003Konstantynów Łódzki\0033200178\0031\0031\0040-4\0030-4_8\003Kutno\0033200179\0031\0031\0040-4\0030-4_9\003Łask\0033200180\0031\0031\0040-4\0030-4_10\003Łęczyca\0033200181\0031\0031\0040-4\0030-4_11\003Łowicz\0033200182\0031\0031\0040-4\0030-4_12\003Łódź\0033200183\0031\0031\0040-4\0030-4_13\003Opoczno\0033200184\0031\0031\0040-4\0030-4_14\003Ozorków\0033200185\0031\0031\0040-4\0030-4_15\003Pabianice\0033200186\0031\0031\0040-4\0030-4_16\003Pajęczno\0033200187\0031\0031\0040-4\0030-4_17\003Piotrków Trybunalski\0033200188\0031\0031\0040-4\0030-4_18\003Poddębice\0033200189\0031\0031\0040-4\0030-4_19\003Radomsko\0033200190\0031\0031\0040-4\0030-4_20\003Rawa Mazowiecka\0033200191\0031\0031\0040-4\0030-4_21\003Sieradz\0033200192\0031\0031\0040-4\0030-4_22\003Skierniewice\0033200193\0031\0031\0040-4\0030-4_23\003 Tuszyn\0033200476\0031\0031\0040-4\0030-4_24\003Tomaszów Mazowiecki\0033200194\0031\0031\0040-4\0030-4_25\003Wieluń\0033200195\0031\0031\0040-4\0030-4_26\003Wieruszów\0033200196\0031\0031\0040-4\0030-4_27\003Zduńska Wola\0033200197\0031\0031\0040-4\0030-4_28\003 Zelów\0033200477\0031\0031\0040-4\0030-4_29\003Zgierz\0033200198\0031\0031\0040-4\0030-4_30\003 Żychlin\0033200478\0031\0031\004\0030-5\003Małopolskie\0033200003\0031\0031\0040-5\0030-5_0\003Wszystkie Małopolskie\0033200003\0031\0030\0040-5\0030-5_1\003Alwernia\0033200610\0031\0031\0040-5\0030-5_2\003Andrychów\0033200199\0031\0031\0040-5\0030-5_3\003Bochnia\0033200200\0031\0031\0040-5\0030-5_4\003Brzesko\0033200201\0031\0031\0040-5\0030-5_5\003Brzeszcze\0033200479\0031\0031\0040-5\0030-5_6\003Bukowina Tatrzańska\0033200202\0031\0031\0040-5\0030-5_7\003Bukowno\0033200480\0031\0031\0040-5\0030-5_8\003Chełmek\0033200481\0031\0031\0040-5\0030-5_9\003Chrzanów\0033200203\0031\0031\0040-5\0030-5_10\003Czorsztyn\0033200611\0031\0031\0040-5\0030-5_11\003Dąbrowa Tarnowska\0033200204\0031\0031\0040-5\0030-5_12\003Gorlice\0033200205\0031\0031\0040-5\0030-5_13\003Kęty\0033200206\0031\0031\0040-5\0030-5_14\003Kocmyrzów\0033200618\0031\0031\0040-5\0030-5_15\003Kościelisko\0033200207\0031\0031\0040-5\0030-5_16\003Kraków\0033200208\0031\0031\0040-5\0030-5_17\003Krościenko nad Dunajcem\0033200491\0031\0031\0040-5\0030-5_18\003Krynica-Zdrój\0033200209\0031\0031\0040-5\0030-5_19\003Krzeszowice\0033200482\0031\0031\0040-5\0030-5_20\003Libiąż\0033200483\0031\0031\0040-5\0030-5_21\003Limanowa\0033200210\0031\0031\0040-5\0030-5_22\003Miechów\0033200211\0031\0031\0040-5\0030-5_23\003Mszana Dolna\0033200484\0031\0031\0040-5\0030-5_24\003Myślenice\0033200212\0031\0031\0040-5\0030-5_25\003Niedzica\0033200612\0031\0031\0040-5\0030-5_26\003Niepołomice\0033200485\0031\0031\0040-5\0030-5_27\003Nowy Sącz\0033200213\0031\0031\0040-5\0030-5_28\003Nowy Targ\0033200214\0031\0031\0040-5\0030-5_29\003Olkusz\0033200215\0031\0031\0040-5\0030-5_30\003Oświęcim\0033200216\0031\0031\0040-5\0030-5_31\003Piwniczna-Zdrój\0033200486\0031\0031\0040-5\0030-5_32\003Proszowice\0033200217\0031\0031\0040-5\0030-5_33\003Rabka-Zdrój\0033200487\0031\0031\0040-5\0030-5_34\003Skawina\0033200218\0031\0031\0040-5\0030-5_35\003Słomniki\0033200619\0031\0031\0040-5\0030-5_36\003Stary Sącz\0033200488\0031\0031\0040-5\0030-5_37\003Sucha Beskidzka\0033200219\0031\0031\0040-5\0030-5_38\003Szczawnica\0033200220\0031\0031\0040-5\0030-5_39\003Tarnów\0033200221\0031\0031\0040-5\0030-5_40\003Trzebinia\0033200222\0031\0031\0040-5\0030-5_41\003Tuchów\0033200489\0031\0031\0040-5\0030-5_42\003Wadowice\0033200223\0031\0031\0040-5\0030-5_43\003Wieliczka\0033200224\0031\0031\0040-5\0030-5_44\003Wolbrom\0033200490\0031\0031\0040-5\0030-5_45\003Zakopane\0033200225\0031\0031\004\0030-6\003Mazowieckie\0033200001\0031\0031\0040-6\0030-6_0\003Wszystkie Mazowieckie\0033200001\0031\0030\0040-6\0030-6_1\003Warszawa\0033200008\0031\0031\0040-6\0030-6_2\003Północne powiaty\0033200027\0031\0031\0040-6\0030-6_3\003Pn - wsch powiaty\0033200036\0031\0031\0040-6\0030-6_4\003Pn - zach powiaty\0033200041\0031\0031\0040-6\0030-6_5\003Południowe powiaty\0033200042\0031\0031\0040-6\0030-6_6\003Pd - wsch powiaty\0033200043\0031\0031\0040-6\0030-6_7\003Pd - zach powiaty\0033200044\0031\0031\0040-6\0030-6_8\003Wschodnie powiaty\0033200045\0031\0031\0040-6\0030-6_9\003Zachodnie powiaty\0033200046\0031\0031\004\0030-7\003Opolskie\0033200078\0031\0031\0040-7\0030-7_0\003Wszystkie Opolskie\0033200078\0031\0030\0040-7\0030-7_1\003Brzeg\0033200226\0031\0031\0040-7\0030-7_2\003Głubczyce\0033200227\0031\0031\0040-7\0030-7_3\003Grodków\0033200526\0031\0031\0040-7\0030-7_4\003Kędzierzyn-Koźle\0033200228\0031\0031\0040-7\0030-7_5\003Kluczbork\0033200229\0031\0031\0040-7\0030-7_6\003Krapkowice\0033200230\0031\0031\0040-7\0030-7_7\003Namysłów\0033200231\0031\0031\0040-7\0030-7_8\003Niemodlin\0033200527\0031\0031\0040-7\0030-7_9\003Nysa\0033200232\0031\0031\0040-7\0030-7_10\003Olesno\0033200233\0031\0031\0040-7\0030-7_11\003Opole\0033200234\0031\0031\0040-7\0030-7_12\003Ozimek\0033200528\0031\0031\0040-7\0030-7_13\003Paczków\0033200529\0031\0031\0040-7\0030-7_14\003Praszka\0033200530\0031\0031\0040-7\0030-7_15\003Prószków\0033200593\0031\0031\0040-7\0030-7_16\003Prudnik\0033200235\0031\0031\0040-7\0030-7_17\003Strzelce Opolskie\0033200236\0031\0031\0040-7\0030-7_18\003Zawadzkie\0033200531\0031\0031\0040-7\0030-7_19\003Zdzieszowice\0033200532\0031\0031\004\0030-8\003Podkarpackie\0033200079\0031\0031\0040-8\0030-8_0\003Wszystkie Podkarpackie\0033200079\0031\0030\0040-8\0030-8_1\003Brzozów\0033200237\0031\0031\0040-8\0030-8_2\003Cisna\0033200607\0031\0031\0040-8\0030-8_3\003Dębica\0033200238\0031\0031\0040-8\0030-8_4\003Jarosław\0033200239\0031\0031\0040-8\0030-8_5\003Jasło\0033200240\0031\0031\0040-8\0030-8_6\003Kolbuszowa\0033200241\0031\0031\0040-8\0030-8_7\003Krosno\0033200242\0031\0031\0040-8\0030-8_8\003Lesko\0033200243\0031\0031\0040-8\0030-8_9\003Leżajsk\0033200244\0031\0031\0040-8\0030-8_10\003Lubaczów\0033200245\0031\0031\0040-8\0030-8_11\003Łańcut\0033200246\0031\0031\0040-8\0030-8_12\003Mielec\0033200247\0031\0031\0040-8\0030-8_13\003Nisko\0033200248\0031\0031\0040-8\0030-8_14\003Nowa Dęba\0033200533\0031\0031\0040-8\0030-8_15\003Przemyśl\0033200249\0031\0031\0040-8\0030-8_16\003Przeworsk\0033200250\0031\0031\0040-8\0030-8_17\003Ropczyce\0033200251\0031\0031\0040-8\0030-8_18\003Rzeszów\0033200252\0031\0031\0040-8\0030-8_19\003Sanok\0033200253\0031\0031\0040-8\0030-8_20\003Sędziszów Małopolski\0033200534\0031\0031\0040-8\0030-8_21\003Stalowa Wola\0033200254\0031\0031\0040-8\0030-8_22\003Strzebowiska\0033200608\0031\0031\0040-8\0030-8_23\003Strzyżów\0033200255\0031\0031\0040-8\0030-8_24\003Tarnobrzeg\0033200256\0031\0031\0040-8\0030-8_25\003Ustrzyki Dolne\0033200257\0031\0031\004\0030-9\003Podlaskie\0033200080\0031\0031\0040-9\0030-9_0\003Wszystkie Podlaskie\0033200080\0031\0030\0040-9\0030-9_1\003Augustów\0033200258\0031\0031\0040-9\0030-9_2\003Białystok\0033200259\0031\0031\0040-9\0030-9_3\003Bielsk Podlaski\0033200260\0031\0031\0040-9\0030-9_4\003 Czarna Białostocka\0033200535\0031\0031\0040-9\0030-9_5\003 Dąbrowa Białostocka\0033200536\0031\0031\0040-9\0030-9_6\003Grajewo\0033200261\0031\0031\0040-9\0030-9_7\003Hajnówka\0033200262\0031\0031\0040-9\0030-9_8\003Kolno\0033200263\0031\0031\0040-9\0030-9_9\003Łapy\0033200264\0031\0031\0040-9\0030-9_10\003Łomża\0033200265\0031\0031\0040-9\0030-9_11\003Mońki\0033200266\0031\0031\0040-9\0030-9_12\003Sejny\0033200267\0031\0031\0040-9\0030-9_13\003Siemiatycze\0033200268\0031\0031\0040-9\0030-9_14\003Sokółka\0033200269\0031\0031\0040-9\0030-9_15\003Suwałki\0033200270\0031\0031\0040-9\0030-9_16\003 Wasilków\0033200537\0031\0031\0040-9\0030-9_17\003Wysokie Mazowieckie\0033200271\0031\0031\0040-9\0030-9_18\003Zambrów\0033200272\0031\0031\004\0030-10\003Pomorskie\0033200005\0031\0031\0040-10\0030-10_0\003Wszystkie Pomorskie\0033200005\0031\0030\0040-10\0030-10_1\003Bytów\0033200407\0031\0031\0040-10\0030-10_2\003Chojnice\0033200408\0031\0031\0040-10\0030-10_3\003Człuchów\0033200409\0031\0031\0040-10\0030-10_4\003Czersk\0033200539\0031\0031\0040-10\0030-10_5\003Gdańsk\0033200072\0031\0031\0040-10\0030-10_6\003Gdynia\0033200073\0031\0031\0040-10\0030-10_7\003Gniew\0033200543\0031\0031\0040-10\0030-10_8\003Hel\0033200410\0031\0031\0040-10\0030-10_9\003Jastarnia\0033200411\0031\0031\0040-10\0030-10_10\003Jastrzębia Góra\0033200412\0031\0031\0040-10\0030-10_11\003Kartuzy\0033200413\0031\0031\0040-10\0030-10_12\003Karwia\0033200414\0031\0031\0040-10\0030-10_13\003Kościerzyna\0033200415\0031\0031\0040-10\0030-10_14\003Krynica Morska\0033200416\0031\0031\0040-10\0030-10_15\003Kwidzyn\0033200417\0031\0031\0040-10\0030-10_16\003Łeba\0033200418\0031\0031\0040-10\0030-10_17\003Lębork\0033200419\0031\0031\0040-10\0030-10_18\003Malbork\0033200420\0031\0031\0040-10\0030-10_19\003Miastko\0033200538\0031\0031\0040-10\0030-10_20\003Nowy Dwór Gdański\0033200421\0031\0031\0040-10\0030-10_21\003Pelplin\0033200541\0031\0031\0040-10\0030-10_22\003Pępowo\0033200589\0031\0031\0040-10\0030-10_23\003Prabuty\0033200540\0031\0031\0040-10\0030-10_24\003Pruszcz Gdański\0033200422\0031\0031\0040-10\0030-10_25\003Puck\0033200423\0031\0031\0040-10\0030-10_26\003Reda\0033200424\0031\0031\0040-10\0030-10_27\003Rumia\0033200425\0031\0031\0040-10\0030-10_28\003Skarszewy\0033200542\0031\0031\0040-10\0030-10_29\003Słupsk\0033200426\0031\0031\0040-10\0030-10_30\003Sopot\0033200074\0031\0031\0040-10\0030-10_31\003Starogard Gdański\0033200427\0031\0031\0040-10\0030-10_32\003Stegna\0033200428\0031\0031\0040-10\0030-10_33\003Sztum\0033200429\0031\0031\0040-10\0030-10_34\003Sztutowo\0033200544\0031\0031\0040-10\0030-10_35\003Tczew\0033200430\0031\0031\0040-10\0030-10_36\003Ustka\0033200431\0031\0031\0040-10\0030-10_37\003Wejherowo\0033200432\0031\0031\0040-10\0030-10_38\003Władysławowo\0033200433\0031\0031\0040-10\0030-10_39\003Żukowo\0033200590\0031\0031\004\0030-11\003Śląskie\0033200002\0031\0031\0040-11\0030-11_0\003Wszystkie Śląskie\0033200002\0031\0030\0040-11\0030-11_1\003Będzin\0033200273\0031\0031\0040-11\0030-11_2\003Bielsko-Biała\0033200274\0031\0031\0040-11\0030-11_3\003Bieruń\0033200275\0031\0031\0040-11\0030-11_4\003Blachownia\0033200545\0031\0031\0040-11\0030-11_5\003Brenna\0033200605\0031\0031\0040-11\0030-11_6\003Bytom\0033200277\0031\0031\0040-11\0030-11_7\003Chorzów\0033200278\0031\0031\0040-11\0030-11_8\003Cieszyn\0033200279\0031\0031\0040-11\0030-11_9\003Czechowice-Dziedzice\0033200546\0031\0031\0040-11\0030-11_10\003Czeladź\0033200547\0031\0031\0040-11\0030-11_11\003Czerwionka-Leszczyny\0033200548\0031\0031\0040-11\0030-11_12\003Częstochowa\0033200280\0031\0031\0040-11\0030-11_13\003Dąbrowa Górnicza\0033200281\0031\0031\0040-11\0030-11_14\003Gliwice\0033200282\0031\0031\0040-11\0030-11_15\003Imielin\0033200549\0031\0031\0040-11\0030-11_16\003Jastrzębie-Zdrój\0033200283\0031\0031\0040-11\0030-11_17\003Jaworzno\0033200284\0031\0031\0040-11\0030-11_18\003Kalety\0033200550\0031\0031\0040-11\0030-11_19\003Knurów\0033200551\0031\0031\0040-11\0030-11_20\003Katowice\0033200285\0031\0031\0040-11\0030-11_21\003Kłobuck\0033200286\0031\0031\0040-11\0030-11_22\003Korbielów\0033200604\0031\0031\0040-11\0030-11_23\003Lędziny\0033200552\0031\0031\0040-11\0030-11_24\003Lubliniec\0033200287\0031\0031\0040-11\0030-11_25\003Łaziska Górne\0033200553\0031\0031\0040-11\0030-11_26\003Mikołów\0033200288\0031\0031\0040-11\0030-11_27\003Milówka\0033200606\0031\0031\0040-11\0030-11_28\003Mysłowice\0033200289\0031\0031\0040-11\0030-11_29\003Myszków\0033200290\0031\0031\0040-11\0030-11_30\003Orzesze\0033200554\0031\0031\0040-11\0030-11_31\003Piekary Śląskie\0033200291\0031\0031\0040-11\0030-11_32\003Poręba\0033200555\0031\0031\0040-11\0030-11_33\003Pszczyna\0033200292\0031\0031\0040-11\0030-11_34\003Pszów\0033200556\0031\0031\0040-11\0030-11_35\003Pyskowice\0033200557\0031\0031\0040-11\0030-11_36\003Racibórz\0033200293\0031\0031\0040-11\0030-11_37\003Radlin\0033200558\0031\0031\0040-11\0030-11_38\003Radzionków\0033200559\0031\0031\0040-11\0030-11_39\003Ruda Śląska\0033200294\0031\0031\0040-11\0030-11_40\003Rybnik\0033200295\0031\0031\0040-11\0030-11_41\003Rydułtowy\0033200560\0031\0031\0040-11\0030-11_42\003Siemianowice Śląskie\0033200296\0031\0031\0040-11\0030-11_43\003Siewierz\0033200602\0031\0031\0040-11\0030-11_44\003Skoczów\0033200561\0031\0031\0040-11\0030-11_45\003Sosnowiec\0033200297\0031\0031\0040-11\0030-11_46\003Świeklaniec\0033200603\0031\0031\0040-11\0030-11_47\003Świętochłowice\0033200298\0031\0031\0040-11\0030-11_48\003Szczyrk\0033200299\0031\0031\0040-11\0030-11_49\003Tarnowskie Góry\0033200300\0031\0031\0040-11\0030-11_50\003Tychy\0033200301\0031\0031\0040-11\0030-11_51\003Ustroń\0033200562\0031\0031\0040-11\0030-11_52\003Wisła\0033200302\0031\0031\0040-11\0030-11_53\003Wodzisław Śląski\0033200303\0031\0031\0040-11\0030-11_54\003Wojkowice\0033200563\0031\0031\0040-11\0030-11_55\003Zabrze\0033200304\0031\0031\0040-11\0030-11_56\003Zawiercie\0033200305\0031\0031\0040-11\0030-11_57\003Żory\0033200306\0031\0031\0040-11\0030-11_58\003Żywiec\0033200307\0031\0031\004\0030-12\003Świętokrzyskie\0033200082\0031\0031\0040-12\0030-12_0\003Wszystkie Świętokrzyskie\0033200082\0031\0030\0040-12\0030-12_1\003Busko-Zdrój\0033200308\0031\0031\0040-12\0030-12_2\003Jędrzejów\0033200309\0031\0031\0040-12\0030-12_3\003Kazimierza Wielka\0033200310\0031\0031\0040-12\0030-12_4\003Kielce\0033200311\0031\0031\0040-12\0030-12_5\003Końskie\0033200312\0031\0031\0040-12\0030-12_6\003Opatów\0033200313\0031\0031\0040-12\0030-12_7\003Ostrowiec Świętokrzyski\0033200314\0031\0031\0040-12\0030-12_8\003Pińczów\0033200315\0031\0031\0040-12\0030-12_9\003Połaniec\0033200564\0031\0031\0040-12\0030-12_10\003Sandomierz\0033200316\0031\0031\0040-12\0030-12_11\003Skarżysko-Kamienna\0033200317\0031\0031\0040-12\0030-12_12\003Starachowice\0033200318\0031\0031\0040-12\0030-12_13\003Staszów\0033200319\0031\0031\0040-12\0030-12_14\003Suchedniów\0033200565\0031\0031\0040-12\0030-12_15\003Włoszczowa\0033200320\0031\0031\004\0030-13\003Warmińsko-mazurskie\0033200083\0031\0031\0040-13\0030-13_0\003Wszystkie Warmińsko-mazurskie\0033200083\0031\0030\0040-13\0030-13_1\003Barczewo\0033200613\0031\0031\0040-13\0030-13_2\003Bartoszyce\0033200321\0031\0031\0040-13\0030-13_3\003Biskupiec\0033200322\0031\0031\0040-13\0030-13_4\003Braniewo\0033200323\0031\0031\0040-13\0030-13_5\003Dobre Miasto\0033200324\0031\0031\0040-13\0030-13_6\003Działdowo\0033200325\0031\0031\0040-13\0030-13_7\003Elbląg\0033200326\0031\0031\0040-13\0030-13_8\003Ełk\0033200327\0031\0031\0040-13\0030-13_9\003Giżycko\0033200328\0031\0031\0040-13\0030-13_10\003Gołdap\0033200329\0031\0031\0040-13\0030-13_11\003Górowo Iławieckie\0033200615\0031\0031\0040-13\0030-13_12\003Iława\0033200330\0031\0031\0040-13\0030-13_13\003Kętrzyn\0033200331\0031\0031\0040-13\0030-13_14\003Lidzbark Warmiński\0033200332\0031\0031\0040-13\0030-13_15\003 Lubawa\0033200566\0031\0031\0040-13\0030-13_16\003Mikołajki\0033200333\0031\0031\0040-13\0030-13_17\003 Morąg\0033200567\0031\0031\0040-13\0030-13_18\003Mrągowo\0033200334\0031\0031\0040-13\0030-13_19\003Nidzica\0033200335\0031\0031\0040-13\0030-13_20\003Nowe Miasto Lubawskie\0033200336\0031\0031\0040-13\0030-13_21\003Olecko\0033200337\0031\0031\0040-13\0030-13_22\003Olsztyn\0033200338\0031\0031\0040-13\0030-13_23\003 Olsztynek\0033200568\0031\0031\0040-13\0030-13_24\003 Orneta\0033200569\0031\0031\0040-13\0030-13_25\003Ostróda\0033200339\0031\0031\0040-13\0030-13_26\003 Pasłęk\0033200570\0031\0031\0040-13\0030-13_27\003Pieniężno\0033200616\0031\0031\0040-13\0030-13_28\003Pisz\0033200340\0031\0031\0040-13\0030-13_29\003Ruciane-Nida\0033200617\0031\0031\0040-13\0030-13_30\003Szczytno\0033200341\0031\0031\0040-13\0030-13_31\003Węgorzewo\0033200342\0031\0031\004\0030-14\003Wielkopolskie\0033200006\0031\0031\0040-14\0030-14_0\003Wszystkie Wielkopolskie\0033200006\0031\0030\0040-14\0030-14_1\003Buk\0033200587\0031\0031\0040-14\0030-14_2\003Chodzież\0033200343\0031\0031\0040-14\0030-14_3\003Czarnków\0033200344\0031\0031\0040-14\0030-14_4\003Gniezno\0033200345\0031\0031\0040-14\0030-14_5\003Gostyń\0033200346\0031\0031\0040-14\0030-14_6\003Grodzisk Wielkopolski\0033200347\0031\0031\0040-14\0030-14_7\003Jarocin\0033200348\0031\0031\0040-14\0030-14_8\003Jastrowie\0033200571\0031\0031\0040-14\0030-14_9\003Kalisz\0033200349\0031\0031\0040-14\0030-14_10\003Kępno\0033200350\0031\0031\0040-14\0030-14_11\003Koło\0033200351\0031\0031\0040-14\0030-14_12\003Konin\0033200352\0031\0031\0040-14\0030-14_13\003Kostrzyn\0033200572\0031\0031\0040-14\0030-14_14\003Kościan\0033200353\0031\0031\0040-14\0030-14_15\003Kórnik\0033200573\0031\0031\0040-14\0030-14_16\003Krotoszyn\0033200354\0031\0031\0040-14\0030-14_17\003Leszno\0033200355\0031\0031\0040-14\0030-14_18\003Luboń\0033200356\0031\0031\0040-14\0030-14_19\003Międzychód\0033200357\0031\0031\0040-14\0030-14_20\003Mosina\0033200358\0031\0031\0040-14\0030-14_21\003Murowana Goślina\0033200359\0031\0031\0040-14\0030-14_22\003Nowy Tomyśl\0033200360\0031\0031\0040-14\0030-14_23\003Oborniki\0033200361\0031\0031\0040-14\0030-14_24\003Opalenica\0033200574\0031\0031\0040-14\0030-14_25\003Ostrów Wielkopolski\0033200362\0031\0031\0040-14\0030-14_26\003Ostrzeszów\0033200363\0031\0031\0040-14\0030-14_27\003Piła\0033200364\0031\0031\0040-14\0030-14_28\003Pleszew\0033200365\0031\0031\0040-14\0030-14_29\003Pniewy\0033200575\0031\0031\0040-14\0030-14_30\003Pobiedziska\0033200576\0031\0031\0040-14\0030-14_31\003Poznań\0033200366\0031\0031\0040-14\0030-14_32\003Puszczykowo\0033200577\0031\0031\0040-14\0030-14_33\003Rawicz\0033200367\0031\0031\0040-14\0030-14_34\003Rogoźno\0033200578\0031\0031\0040-14\0030-14_35\003Słupca\0033200368\0031\0031\0040-14\0030-14_36\003Swarzędz\0033200369\0031\0031\0040-14\0030-14_37\003Szamotuły\0033200370\0031\0031\0040-14\0030-14_38\003Śrem\0033200371\0031\0031\0040-14\0030-14_39\003Środa Wielkopolska\0033200372\0031\0031\0040-14\0030-14_40\003Trzcianka\0033200373\0031\0031\0040-14\0030-14_41\003Trzemeszno\0033200579\0031\0031\0040-14\0030-14_42\003Turek\0033200374\0031\0031\0040-14\0030-14_43\003Wągrowiec\0033200375\0031\0031\0040-14\0030-14_44\003Witkowo\0033200580\0031\0031\0040-14\0030-14_45\003Wolsztyn\0033200376\0031\0031\0040-14\0030-14_46\003Wronki\0033200581\0031\0031\0040-14\0030-14_47\003Września\0033200377\0031\0031\0040-14\0030-14_48\003Złotów\0033200378\0031\0031\004\0030-15\003Zachodniopomorskie\0033200084\0031\0031\0040-15\0030-15_0\003Wszystkie Zachodniopomorskie\0033200084\0031\0030\0040-15\0030-15_1\003Barlinek\0033200379\0031\0031\0040-15\0030-15_2\003Białogard\0033200380\0031\0031\0040-15\0030-15_3\003Cedynia\0033200381\0031\0031\0040-15\0030-15_4\003Chojna\0033200620\0031\0031\0040-15\0030-15_5\003Choszczno\0033200382\0031\0031\0040-15\0030-15_6\003Czaplinek\0033200586\0031\0031\0040-15\0030-15_7\003Darłowo\0033200383\0031\0031\0040-15\0030-15_8\003Dębno\0033200384\0031\0031\0040-15\0030-15_9\003Drawno\0033200385\0031\0031\0040-15\0030-15_10\003Drawsko Pomorskie\0033200386\0031\0031\0040-15\0030-15_11\003Goleniów\0033200387\0031\0031\0040-15\0030-15_12\003Gryfice\0033200388\0031\0031\0040-15\0030-15_13\003Gryfino\0033200389\0031\0031\0040-15\0030-15_14\003Kamień Pomorski\0033200390\0031\0031\0040-15\0030-15_15\003Kołobrzeg\0033200391\0031\0031\0040-15\0030-15_16\003Koszalin\0033200392\0031\0031\0040-15\0030-15_17\003Łobez\0033200393\0031\0031\0040-15\0030-15_18\003Międzyzdroje\0033200394\0031\0031\0040-15\0030-15_19\003Mielno\0033200395\0031\0031\0040-15\0030-15_20\003Myślibórz\0033200396\0031\0031\0040-15\0030-15_21\003Nowogard\0033200397\0031\0031\0040-15\0030-15_22\003Police\0033200398\0031\0031\0040-15\0030-15_23\003Połczyn-Zdrój\0033200582\0031\0031\0040-15\0030-15_24\003Pyrzyce\0033200399\0031\0031\0040-15\0030-15_25\003Sławno\0033200400\0031\0031\0040-15\0030-15_26\003Stargard Szczeciński\0033200401\0031\0031\0040-15\0030-15_27\003Szczecin\0033200402\0031\0031\0040-15\0030-15_28\003Szczecinek\0033200403\0031\0031\0040-15\0030-15_29\003Świdwin\0033200404\0031\0031\0040-15\0030-15_30\003Świnoujście\0033200405\0031\0031\0040-15\0030-15_31\003Trzebiatów\0033200583\0031\0031\0040-15\0030-15_32\003Wałcz\0033200406\0031\0031\0040-15\0030-15_33\003Wolin\0033200584\0031\0031\0040-15\0030-15_34\003Złocieniec\0033200585\0031\0031\004";

            var locations = sdata.split('\004');
            self.parsedLocations = [];
            _.forEach(locations, function(location) {
                var parsedData = location.split('\003');
                if(parsedData.length !== properNodeSize) {
                    return 1;
                }
                if(_.isEmpty(self.parsedLocations[parsedData[3]])) {
                    self.parsedLocations[parsedData[3]] = {
                        value: parsedData[3],
                        display: parsedData[2],
                        name: parsedData[2].toLowerCase().replace(/ /g, '-').replace(/ą/g, 'a').replace(/Ą/g, 'A')
                            .replace(/ć/g, 'c').replace(/Ć/g, 'C')
                            .replace(/ę/g, 'e').replace(/Ę/g, 'E')
                            .replace(/ł/g, 'l').replace(/Ł/g, 'L')
                            .replace(/ń/g, 'n').replace(/Ń/g, 'N')
                            .replace(/ó/g, 'o').replace(/Ó/g, 'O')
                            .replace(/ś/g, 's').replace(/Ś/g, 'S')
                            .replace(/ż/g, 'z').replace(/Ż/g, 'Z')
                            .replace(/ź/g, 'z').replace(/Ź/g, 'Z')
                    };
                }
            });

            this.prepareGumtreeLink = function(link) {
                var gumtreeLinkData = 'http://www.gumtree.pl/fp-mieszkania-i-domy-do-wynajecia/';
                if(!_.isUndefined(link)) {
                    var gumtreeLocation = self.parsedLocations.filter( function (location) {
                        if(!_.isUndefined(link.split(locationSpliter)[1])) {
                            return location.value === link.split(locationSpliter)[1].split('&')[0];
                        } else {
                            return false;
                        }
                    });
                    if(!_.isUndefined(gumtreeLocation[0])) {
                        gumtreeLinkData += gumtreeLocation[0].name+'/c'+link.split(categorySpliter)[1].split('&')[0]
                        + 'l' + gumtreeLocation[0].value + '?' + link.split(locationSpliter)[1].split('&')[1];
                    } else {
                        gumtreeLinkData += 'c'+link.split(categorySpliter)[1].split('&')[0]
                        + '?' + (!_.isUndefined(link.split(locationSpliter)[1]) ?
                            link.split(locationSpliter)[1].split('&')[1] : link.split(categorySpliter)[1].split('&')[1]);
                    }
                    return gumtreeLinkData;
                }
                return '';
            };

            this.generateGumtreeLink = function(link) {
                var gumData = link.split('?')[0].split('/c');
                gumData = gumData[gumData.length-1].split('l');
                var gumtreeLink = 'http://www.gumtree.pl/f-SearchAdRss?';
                gumtreeLink += categorySpliter+''+gumData[0];
                if(_.isUndefined(gumData[1])) {
                    gumtreeLink += '&'+locationSpliter+''+gumData[1];
                }
                if(!_.isUndefined(link.split('?')[1])) {
                    gumtreeLink += '&'+self.settings.gumtreeLink.split('?')[1];
                }
                return gumtreeLink
            };

            this.getOlxLinkBySettings = function(settings) {
                var link = 'http://olx.pl/nieruchomosci/mieszkania/wynajem/';
                if(settings.location.display !== '' && settings.location.name !== null) {
                    link += ''+settings.location.name+'/';
                }
                link += '?';
                if(!_.isNull(settings.priceTo) && !_.isUndefined(settings.priceTo)) {
                    link += 'search[filter_float_price:to]='+settings.priceTo+'&';
                }
                if(!_.isNull(settings.priceFrom) && !_.isUndefined(settings.priceFrom)) {
                    link += 'search[filter_float_price:from]='+settings.priceFrom+'&';
                }
                if(!_.isNull(settings.areaFrom) && !_.isUndefined(settings.areaFrom)) {
                    link += 'search[filter_float_m:from]='+settings.areaFrom+'&';
                }
                if(!_.isNull(settings.areaTo) && !_.isUndefined(settings.areaTo)) {
                    link += 'search[filter_float_m:to]='+settings.areaTo+'&';
                }
                if(!_.isNull(settings.owner) && settings.owner !== 'both' && !_.isUndefined(settings.owner)) {
                    link += 'search[private_business]='+(settings.owner === 'private' ? 'private' : 'business')+'&';
                }
                return link;
            };

            this.getGumtreeLinkBySettings = function(settings) {
                var link = 'http://www.gumtree.pl/f-SearchAdRss?CatId=9008';
                if(settings.location.display !== '' && settings.location.value !== null) {
                    link += '&Location='+settings.location.value;
                }
                link += '&';
                if(!_.isNull(settings.priceTo) && !_.isUndefined(settings.priceTo)) {
                    link += 'maxPrice='+settings.priceTo+'&';
                }
                if(!_.isNull(settings.priceFrom) && !_.isUndefined(settings.priceFrom)) {
                    link += 'minPrice='+settings.priceFrom+'&';
                }
                if(!_.isNull(settings.areaFrom) && !_.isUndefined(settings.areaFrom)) {
                    link += 'A_AreaInMeters_min='+settings.areaFrom+'&';
                }
                if(!_.isNull(settings.areaTo) && !_.isUndefined(settings.areaTo)) {
                    link += 'A_AreaInMeters_max='+settings.areaTo+'&';
                }
                if(!_.isNull(settings.owner) && settings.owner !== 'both' && !_.isUndefined(settings.owner)) {
                    link += 'A_ForRentBy='+(settings.owner === 'private' ? 'ownr' : 'agncy')+'&';
                }
                return link;
            };

            this.searchLocationByName = function(query) {
                return self.parsedLocations.filter( createFilterFor(query) );
            };

            var createFilterFor = function(query){
                var lowercaseQuery = angular.lowercase(query);
                return function filterFn(location) {
                    return (location.name.indexOf(lowercaseQuery) === 0);
                };
            }
        }]);
})();
